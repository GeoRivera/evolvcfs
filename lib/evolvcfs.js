"use strict";(function(Global,document){var _fromNullable=function(a){return void 0===a||!a},_toDate=function(a){return new Date(a)},_box=function(a){return Array.isArray(a)?a:[a]},_isBlank=function(a){return""===getFormElement(a)},_where=function(a){var b=a.replace(/{{/g,"\\'\\'' + {{").replace(/}}/g," + '\\'\\' {{").replace(/{#/g,"' + {{").replace(/#}/g," + ' {{").split("{{");return"'"+b.reduce(function(a,b){return a+b},"")+"'"},_tryCatch=function(a){try{a()}catch(a){}};return Global.$$={hasActiveEnrollment:function hasActiveEnrollment(peopleId,programId){var cond=eval(_where("program_info_id = {{programId}}")),has_enrollment=getDataValue("current_program_enrollment_view","people_id",peopleId,"program_name",cond),end_date=getDataValue("current_program_enrollment_view","people_id",peopleId,"end_date",cond);return has_enrollment&&!end_date},setXMLAttribute:function setXMLAttribute(a,b,c){a=_box(a).slice(),"number"===typeof c&&(c=c?"true":"false");for(var d=0;d<a.length;d++)_tryCatch(getNodeFromXML(formXML,a[d]).setAttribute(b,c));refreshView(a[0])},setRequired:function setRequired(a,b){a=_box(a).slice();var c=b?makeRequired:makeUnRequired;a.map(function(a){return _tryCatch(c({id:a}))})},setRequiredIfEntered:function setRequiredIfEntered(a){return $$.setRequired(a,!_isBlank(a))},setElement:function setElement(a,b){if(formElementExists(a)){var c=getNodeFromXML(a,formXML),d="true"===c.getAttribute("is_modifiable"),e=$("#"+a);if(c.setAttribute("is_modifiable","true"),"DT"===e.attr("type_code")||"D"===e.attr("type_code")){var f=b.split(/\s/i),g=f[0],h=(f[1]?f[1]:"")+(f[2]?f[2]:"");setFormElement(a,g),setFormElement("time_"+a,h),d&&$("#time_"+a).attr("disabled",!d)}else setFormElement(a,b);d&&e.attr("disabled",!d)}},getElement:function getElement(a,b){return _fromNullable(b)?getElementFromXML(formXML,a):getFormElement(a)},getClientAge:function getClientAge(a){return getDataValue("client_personal_view","people_id",a,"age")},getNodeFromXML:function getNodeFromXML(a,b){b=_fromNullable(b)?formXML:b;var c=null;return c="#"===a.charAt(0)?b.selectSingleNode("form_object/form_group/form_item[@caption='"+a.slice(1)+"']")||b.selectSingleNode("form_group/form_item[@caption='"+a.slice(1)+"']"):b.selectSingleNode("form_object/form_group/form_item[@column_name='"+a+"']")||b.selectSingleNode("form_group/form_item[@column_name='"+a+"']"),c},refreshView:function refreshView(a){xslTarget.innerHTML=transformXML(formXSL.XMLDocument.xml,formXML.xml),IsDirty()&&formState(a.form,!0)},dtComp:function dtComp(a,b,c){return a="[object String]"===Object.prototype.toString.call(a)?_toDate($$.getElement(a)):a,c="[object String]"===Object.prototype.toString.call(c)?_toDate($$.getElement(c)):c,"="===b?a.toString()===c.toString():"equal"===b?a.toString()===c.toString():"!="===b?a.toString()!==c.toString():"different"===b?a.toString()!==c.toString():">"===b?a>c:"after"===b?a>c:">="===b?a>=c:"<"===b?a<c:"before"===b?a<c:"<="===b&&a<=c},valiDate:function valiDate(a){for(var b,c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=[].concat(d),g=f[2];(b=$$).dtComp.apply(b,d)&&(alert(a),$$.setElement(g,""))}},$$})(window.parent,document);
"use strict";(function(Global,document){var _fromNullable=function(a){return void 0===a||!a},_toDate=function(a){return new Date(a)},_box=function(a){return Array.isArray(a)?a:[a]},_where=function(a){var b=a.replace(/{{/g,"\\'\\'' + {{").replace(/}}/g," + '\\'\\' {{").replace(/{#/g,"' + {{").replace(/#}/g," + ' {{").split("{{");return"'"+b.reduce(function(a,b){return a+b},"")+"'"},_tryCatch=function(a){try{a()}catch(a){}};return Global.$$={hasActiveEnrollment:function hasActiveEnrollment(peopleId,programId){var cond=eval(_where("program_info_id = {{programId}}")),has_enrollment=getDataValue("current_program_enrollment_view","people_id",peopleId,"program_name",cond),end_date=getDataValue("current_program_enrollment_view","people_id",peopleId,"end_date",cond);return has_enrollment&&!end_date},setXMLAttribute:function setXMLAttribute(a,b,c){a=_box(a).slice(),"number"===typeof c&&(c=c?"true":"false");for(var d=0;d<a.length;d++)_tryCatch(getNodeFromXML(formXML,a[d]).setAttribute(b,c));refreshView(a[0])},setRequired:function setRequired(a,b){a=_box(a).slice();var c=b?makeRequired:makeUnRequired;a.map(function(a){return _tryCatch(c({id:a}))})},setElement:function setElement(a,b){if(formElementExists(a)){var c=getNodeFromXML(formXML,a),d=c.getAttribute("is_modifiable");c.setAttribute("is_modifiable","true"),setElementFromXML(formXML,a,b),c.setAttribute("is_modifiable",d)}},getElement:function getElement(a,b){return _fromNullable(b)?getElementFromXML(formXML,a):getFormElement(a)},getClientAge:function getClientAge(a){return getDataValue("client_personal_view","people_id",a,"age")},getNodeFromXML:function getNodeFromXML(a,b){b=_fromNullable(b)?formXML:b;var c=null;return c="#"===a.charAt(0)?b.selectSingleNode("form_object/form_group/form_item[@caption='"+a.slice(1)+"']")||b.selectSingleNode("form_group/form_item[@caption='"+a.slice(1)+"']"):b.selectSingleNode("form_object/form_group/form_item[@column_name='"+a+"']")||b.selectSingleNode("form_group/form_item[@column_name='"+a+"']"),c},refreshView:function refreshView(a){xslTarget.innerHTML=transformXML(formXSL.XMLDocument.xml,formXML.xml),IsDirty()&&formState(a.form,!0)},dtComp:function dtComp(a,b,c){return"[object String]"===Object.prototype.toString.call(a)&&_toDate($$.getElement(a)),"[object String]"===Object.prototype.toString.call(c)&&_toDate($$.getElement(c)),">"===b?a>c:"after"===b?a>c:">="===b?a>=c:"<"===b?a<c:"before"===b?a<c:"<="===b?a<=c:"="===b?a.toString()===c.toString():"equal"===b?a.toString()===c.toString():"!="===b?a.toString()!==c.toString():"different"===b&&a.toString()!==c.toString()}},$$})(window.parent,document);